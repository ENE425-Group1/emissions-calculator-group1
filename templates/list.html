{% extends 'bootstrap/base.html' %}

{% block styles %}
{{ super() }}
	<style>
		body {
			margin: 0;
			font-family: paralucent,sans-serif;
			background-color: #181818;
			font-size:18px;
			color: #FFFFFF;
		}
		h1, h2 {
		color: #FFFFFF;
		}
		p {
		font-family: 'Courier New',Courier,monospace;
		font-style: normal;
		color: #FFFFFF;
		}
		a {
		font-family: 'Courier New',Courier,monospace;
		color: #FFFFFF;
		text-decoration: none;
		background-color: transparent;
		}
		 a:hover {
		color: #FFFFFF;
		}
		.row {
			margin-left: -40px;
			margin-right: -40px;
		}
		.topnav {
			overflow: hidden;
			background-color: #121212;
		}

		.topnav a {
			float: left;
			display: block;
			color: #f2f2f2;
			text-align: center;
			padding: 14px 16px;
			text-decoration: none;
			font-size: 17px;
		}

		.topnav a:hover {
			background-color: #ddd;
			color: black;
		}

		.topnav a.active {
			background-color: #538D64;
			color: white;
		}

		.topnav .icon {
			display: none;
		}

		@media screen and (max-width: 600px) {
			.topnav a:not(:first-child) {display: none;}
			.topnav a.icon {
				float: right;
				display: block;
			}
		}

		@media screen and (max-width: 600px) {
			.topnav.responsive {position: relative;}
			.topnav.responsive .icon {
				position: absolute;
				right: 0;
				top: 0;
			}
			.topnav.responsive a {
				float: none;
				display: block;
				text-align: left;
			}
			.dropbtn {
	  background-color: #538D64;
	  color: white;
	  padding: 16px;
	  font-size: 16px;
	  border: none;
	  cursor: pointer;
	}
	.dropbtn:hover, .dropbtn:focus {
  background-color: #3C6749;
	}

	.dropdown {
	  position: relative;
	  display: inline-block;
	}

	.dropdown-content {
	  display: none;
	  position: absolute;
	  background-color: #f1f1f1;
	  min-width: 160px;
	  overflow: auto;
	  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
	  z-index: 1;
	}

	.dropdown-content a {
	  color: black;
	  padding: 12px 16px;
	  text-decoration: none;
	  display: block;
	}

	.dropdown a:hover {background-color: #ddd;}

	.show {display: block;}
	</style>
	<link rel="topnavbar stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
{% endblock %}

{% block title %}
Emissions per Transport List
{% endblock %}


{% block content %}

<div class="topnav" id="myTopnav">
	  <a href="{{ url_for('index') }}">Home</a>
	  <a href="{{ url_for('add_record') }}">Add record</a>
	  <a href="{{ url_for('inventory_all') }}" class="active">View records</a>
	  <a href="{{ url_for('select_record') }}">Edit records</a>
		<a style="float:right" href="{{ url_for('logout') }}">Logout</a>
	  <a href="javascript:void(0);" class="icon" onclick="myFunction()">
	    <i class="fa fa-bars"></i>
	  </a>
</div>

<div class="container">
  <div class="row pb-5">
    <div class="col-md-10 col-lg-10 mx-lg-auto mx-md-auto">

      <h1 class="pt-5 pb-2">Emission records</h1>

			<div class="dropdown">
			  <button onclick="myFunction()" class="dropbtn">Filter emission records by transportation type</button>
			  <div id="myDropdown" class="dropdown-content">
			    <a href="{{ url_for('inventory_all') }}">All</a>
					{% for s in transport %}
					<a href="{{ url_for( 'inventory', transport=s.transport ) }}">{{ s.transport }}</a>
					{% endfor %}
			  </div>
			</div>

			{% if transport %}
		  <!-- the form was submitted and message exists -->
			<p>This is the list of all
			<strong>{{ transport }}</strong> records in inventory.</p>
  		{% else %}
				<div>
				<p>This is the list of all records in inventory.</p>
				<a id="data_button" class="page_button" href="{{ url_for('download') }}">Download all records</a>
				<br></br>
				</div>
  		{% endif %}

		<table class="table">
			<tr>
				<th>Kilometers</th>
				<th>Transport type</th>
				<th>Fuel type</th>
				<th>Date</th>
				<th>CO2 kg/km</th>
				<th>User</th>
				<th>Updated</th>
			</tr>

			<!-- here is a for-loop to give us all the records -->
			{% for value in emissions %}
			<tr>
				<td>{{ value.kms }}</td>
				<td>{{ value.transport }}</td>
				<td>{{ value.fuel }}</td>
				<td>{{ value.date }}</td>
				<td>{{ value.co2 }}</td>
				<td>{{ value.user_name }}</td>
				<td>{{ value.updated }}</td>
			</tr>
			{% endfor %}
		</table>

		</div>
	</div>
</div>
<script>
function myFunction() {
	var x = document.getElementById("myTopnav");
	if (x.className === "topnav") {
		x.className += " responsive";
	} else {
		x.className = "topnav";
	}
}
</script>
<script>
/* When the user clicks on the button,
toggle between hiding and showing the dropdown content */
function myFunction() {
  document.getElementById("myDropdown").classList.toggle("show");
}

// Close the dropdown if the user clicks outside of it
window.onclick = function(event) {
  if (!event.target.matches('.dropbtn')) {
    var dropdowns = document.getElementsByClassName("dropdown-content");
    var i;
    for (i = 0; i < dropdowns.length; i++) {
      var openDropdown = dropdowns[i];
      if (openDropdown.classList.contains('show')) {
        openDropdown.classList.remove('show');
      }
    }
  }
}
</script>
{% endblock %}
